{"version":3,"sources":["../../src/pages/asignacion-repartos/asignacion-repartos.module.ts","../../src/pages/asignacion-repartos/asignacion-repartos.ts","../../src/models/entrega.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AsignacionRepartosPage } from './asignacion-repartos';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AsignacionRepartosPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AsignacionRepartosPage),\r\n  ],\r\n})\r\nexport class AsignacionRepartosPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/asignacion-repartos/asignacion-repartos.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, App, AlertController } from 'ionic-angular';\r\nimport { LoginPage } from '../../pages/login/login';\r\nimport { TipoUsuario, Usuario} from '../../models/usuario';\r\nimport { FirebaseDbProvider} from '../../providers/firebase-db/firebase-db';\r\nimport { Entrega} from '../../models/entrega';\r\nimport { ToastController } from 'ionic-angular';\r\n\r\n\r\n/**\r\n * Generated class for the AsignacionRepartosPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-asignacion-repartos',\r\n  templateUrl: 'asignacion-repartos.html',\r\n})\r\nexport class AsignacionRepartosPage {\r\n\r\n\tlistaEntregas: any;\r\n\tlistaUsuarios: any;\r\n\tasignaciones:any[] = [null,null,null,null];\r\n\r\n\tconstructor(public navCtrl: NavController, public navParams: NavParams, public app: App, public dbFirebase:FirebaseDbProvider, public toastCtrl: ToastController, public alertCtrl: AlertController) {\r\n\t\t//Limpiamos y creamos las entregas en la BD\r\n\t\t//this.borrarEntregas();\r\n\t\t//this.crearEntregas();\r\n\t}\r\n  \r\n\tcrearEntregas() {\r\n\t\t//Entregas\r\n\t\tlet entrega1:Entrega = new Entrega(1,\"Joan\",\"687218832\",\"Calle Mayor 15 2D\",1,\"12:00 - 14:00\",\"5kg\",\"SinIncidencia\");\r\n\t\tthis.dbFirebase.guardaEntrega(entrega1);\r\n\t\t\r\n\t\tlet entrega2:Entrega = new Entrega(2,'Álvaro','633444567','Calle Rio Ebro 5 1D',3,'15:00 - 17:00','8kg',\"SinIncidencia\");\r\n\t\tthis.dbFirebase.guardaEntrega(entrega2);\r\n\t\t\r\n\t\tlet entrega3:Entrega = new Entrega(3,'Ana','687252129','Calle Abedul 24 4A',1,'11:00 - 13:00','2kg',\"SinIncidencia\");\r\n\t\tthis.dbFirebase.guardaEntrega(entrega3);\r\n\t\t\r\n\t\tlet entrega4:Entrega = new Entrega(4,'Bart','669444012','Calle Falsa 123',2,'12:00 - 15:00','12kg',\"SinIncidencia\");\r\n\t\tthis.dbFirebase.guardaEntrega(entrega4);\t\r\n\t}\r\n\t\r\n\tborrarEntregas() {\r\n\t\tif (this.listaEntregas != null) {\r\n        for(var i= 0; i< this.listaEntregas.length; i++){\r\n            this.dbFirebase.delEntrega(this.listaEntregas[i].id);\r\n        }\r\n        console.log(\"habia \"+i+\"en la base de datos\");\r\n\t\t}\r\n\t}\r\n\r\n\tionViewDidLoad() {\r\n\t\tconsole.log('ionViewDidLoad AsignacionRepartosPage');\r\n\t}\t\r\n\r\n\tgoToLoginPage() {\r\n\t\tconst root = this.app.getRootNav();\r\n\t\troot.popToRoot();\r\n\t}\r\n  \r\n\tionViewDidEnter(){\r\n\t\tthis.dbFirebase.getEntregas().subscribe(listaEntregas=>{this.listaEntregas=listaEntregas;});\r\n\t\tthis.dbFirebase.getUsuarios().subscribe(listaUsuarios=>{this.listaUsuarios=listaUsuarios;});\r\n\t}\r\n\t\r\n\tgetRepartidorName(idEntrega: number): string {\r\n\t\tfor (var i = 0; i < this.listaEntregas.length; i++) {\r\n\t\t\tif (this.listaEntregas[i].id === idEntrega) {\r\n\t\t\t\tif (this.listaEntregas[i].repartidor == null) {\r\n\t\t\t\t\treturn \"no asignado\";\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn this.listaEntregas[i].repartidor.nombre;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tisRepartidor(usuario: Usuario): boolean {\r\n\t\tif (usuario.tipo === TipoUsuario.Repartidor) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tfinAsignacionManual() {\r\n\t\tfor (var i = 0; i < this.listaEntregas.length; i++) {\r\n\t\t\tif (this.asignaciones[i] != null) {\r\n\t\t\t\tif (this.verificarSiTieneEntregas(this.listaUsuarios[this.asignaciones[i] - 1].id) == false){\r\n\t\t\t\t\tif (this.listaEntregas[i].repartidor == null) {\r\n\t\t\t\t\t\tthis.listaEntregas[i].enCurso = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.listaEntregas[i].repartidor == null) {\r\n\t\t\t\t\t\tthis.listaEntregas[i].enCurso = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tthis.listaEntregas[i].repartidor = this.listaUsuarios[this.asignaciones[this.listaEntregas[i].id - 1]-1];\r\n\t\t\t\tthis.dbFirebase.guardaEntrega(this.listaEntregas[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.asignacionManualMensaje();\r\n\t}\r\n\t\r\n\tverificarSiTieneEntregas(idRepartidor: number): boolean {\r\n\t\tfor (var i = 0; i < this.listaEntregas.length; i++) {\r\n\t\t\tif (this.listaEntregas[i].repartidor != null) {\r\n\t\t\t\tif (this.listaEntregas[i].repartidor.id === idRepartidor) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\tsinIncidencia(idEntrega: number): boolean{ //no incidencia y no entregado\r\n\t\tfor (var i = 0; i < this.listaEntregas.length; i++) {\r\n\t\t\tif (this.listaEntregas[i].id === idEntrega) {\r\n\t\t\t\treturn (this.listaEntregas[i].incidencia === \"SinIncidencia\")&&!this.listaEntregas[i].entregado;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    \r\n    NoEntregado(idEntrega: number): boolean{\r\n\t\tfor (var i = 0; i < this.listaEntregas.length; i++) {\r\n\t\t\tif (this.listaEntregas[i].id === idEntrega) {\r\n\t\t\t\treturn !this.listaEntregas[i].entregado;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tasignacionAutomaticaMensaje() {\r\n\t\tlet toast = this.toastCtrl.create({\r\n\t\t  message: 'Asignación automática completada con éxito',\r\n\t\t  duration: 3000\r\n\t\t});\r\n\t\ttoast.present();\r\n\t}\r\n\t\r\n\tasignacionManualMensaje() {\r\n\t\tlet toast = this.toastCtrl.create({\r\n\t\t  message: 'Asignacion manual completada con éxito',\r\n\t\t  duration: 3000\r\n\t\t});\r\n\t\ttoast.present();\r\n\t}\r\n    \r\n    asignacionAutomaticaAlert(){\r\n        let alert = this.alertCtrl.create({\r\n\t\t\ttitle: '¿Asignación automática?',\r\n\t\t\tmessage: 'Al confirmar se realizara una asignación automática de los paquetes a repartidores. ¿Desea continuar?',\r\n\t\t\tbuttons: [\r\n\t\t\t  {\r\n\t\t\t\ttext: 'Asignar',\r\n\t\t\t\thandler: () => {\r\n\t\t\t\t\tthis.asignacionAutomatica();\r\n\t\t\t\t}\r\n\t\t\t  },\r\n\t\t\t  {\r\n\t\t\t\ttext: 'Reset',\r\n\t\t\t\trole: 'cancel',\r\n\t\t\t\thandler: () => {  \r\n                    this.borrarEntregas();\r\n                    this.crearEntregas();\r\n\t\t\t\t}\r\n\t\t\t  }\r\n\t\t\t]\r\n\t\t  });\r\n\t\t  alert.present();\r\n    }\r\n    \r\n    asignacionAutomatica(){\r\n        this.borrarEntregas();\r\n\t\tthis.crearEntregas();\r\n        \r\n        this.listaEntregas[0].repartidor=this.listaUsuarios[2]; //Alberto\r\n        this.listaEntregas[0].enCurso = true;\r\n        this.listaEntregas[1].repartidor=this.listaUsuarios[2];\r\n\r\n\r\n        this.listaEntregas[2].repartidor=this.listaUsuarios[3]; //Angelo\r\n        this.listaEntregas[2].enCurso = true;\r\n        this.listaEntregas[3].repartidor=this.listaUsuarios[3];\r\n        \r\n        for (var i = 0; i < this.listaEntregas.length; i++) {\r\n            this.dbFirebase.guardaEntrega(this.listaEntregas[i]);\r\n        }\r\n        this.asignacionAutomaticaMensaje();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/asignacion-repartos/asignacion-repartos.ts","import {TipoUsuario, Usuario} from '../models/usuario';\r\n\r\nexport enum TipoIncidencia {\t\r\n\tDireccionErronea,\r\n\tClienteAusente,\r\n\tPaqueteMalasCondiciones,\r\n\tEntregaRehusada,\r\n\tOtraIncidencia,\r\n\tSinIncidencia\r\n}\r\n\r\nexport class Entrega {\r\n\tid: number;\r\n\trepartidor: Usuario;\r\n\tnombreReceptor: string;\r\n\ttelefonoReceptor: string;\r\n\tdireccion: string;\r\n\tnumeroBultos: number;\r\n\tfranjaHoraria: string;\r\n\tpesoTotal: string;\r\n\tincidencia: string;\r\n\tenCurso: boolean;\r\n\tdescripcionOtra: string;\r\n    entregado: boolean;\r\n\t\r\n\tconstructor(id: number, nombreReceptor: string, telefonoReceptor: string, direccion: string, numeroBultos: number, franjaHoraria: string, pesoTotal: string, incidencia: string) {\r\n\t\tthis.id = id;\r\n\t\tthis.repartidor = null;\r\n\t\tthis.nombreReceptor = nombreReceptor;\r\n\t\tthis.telefonoReceptor = telefonoReceptor;\r\n\t\tthis.direccion = direccion;\r\n\t\tthis.numeroBultos = numeroBultos;\r\n\t\tthis.franjaHoraria = franjaHoraria;\r\n\t\tthis.pesoTotal = pesoTotal;\r\n\t\tthis.incidencia = incidencia;\r\n\t\tthis.enCurso = false;\r\n\t\tthis.descripcionOtra = \"\";\r\n        this.entregado = false;\r\n\t}\r\n\t\r\n\tpublic getId(): number {\r\n\t\treturn this.id;\r\n\t}\r\n\t\r\n\tpublic getRepartidorName(): string {\r\n\t\tif (this.repartidor == null) {\r\n\t\t\treturn \"no asignado\";\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn this.repartidor.getNombre();\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic getIncidencia(): string {\r\n\t\treturn this.incidencia;\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/entrega.ts"],"sourceRoot":""}